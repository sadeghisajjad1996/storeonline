"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function generateGUID(){do{var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}while(GUIDList.indexOf(e)>-1);return e}function toFunc(e){if("function"==typeof e)return e;if("string"==typeof e){if(null!=window[e]&&"function"==typeof window[e])return window[e];try{return new Function(e)}catch(e){}}return function(){return e}}function Obj(){this._parent=null,this._handlers=[],this._onceHandlers=[],this._elements=$(),this.guid=generateGUID(),this.on=function(e,t){"function"==typeof e&&void 0===t&&(t=e,e="all"),e=e.toLowerCase().split(" ");for(var n=0;n<e.length;n++)this._handlers.push({event:e[n],handler:t});return this},this.once=function(e,t){"function"==typeof e&&void 0===t&&(t=e,e="all"),e=e.toLowerCase().split(" ");for(var n=0;n<e.length;n++)this._onceHandlers.push({event:e[n],handler:t});return this},this.off=function(e,t){if(void 0===t&&"function"==typeof e){t=e;for(var n=0;n<this._handlers.length;n++)this._handlers[n].handler==t&&this._handlers.splice(n--,1)}else if(void 0===t&&"string"==typeof e){e=e.toLowerCase().split(" ");for(n=0;n<this._handlers.length;n++)e.indexOf(this._handlers[n].event)>-1&&this._handlers.splice(n--,1)}else{e=e.toLowerCase().split(" ");for(n=0;n<this._handlers.length;n++)e.indexOf(this._handlers[n].event)>-1&&this._handlers[n].handler==t&&this._handlers.splice(n--,1)}return this},this.offOnce=function(e,t){if(void 0===t&&"function"==typeof e){t=e;for(var n=0;n<this._onceHandlers.length;n++)this._onceHandlers[n].handler==t&&this._onceHandlers.splice(n--,1)}else if(void 0===t&&"string"==typeof e){e=e.toLowerCase().split(" ");for(n=0;n<this._onceHandlers.length;n++)e.indexOf(this._onceHandlers[n].event)>-1&&this._onceHandlers.splice(n--,1)}else{e=e.toLowerCase().split(" ");for(n=0;n<this._onceHandlers.length;n++)e.indexOf(this._onceHandlers[n].event)>-1&&this._onceHandlers[n].handler==t&&this._onceHandlers.splice(n--,1)}return this},this.trigger=function(e,t){e=e.toLowerCase().split(" ");for(var n=0;n<this._handlers.length;n++)(e.indexOf(this._handlers[n].event)>-1||"all"==this._handlers[n].event)&&toFunc(this._handlers[n].handler).call(this,this._handlers[n].event,t);for(n=0;n<this._onceHandlers.length;n++)(e.indexOf(this._onceHandlers[n].event)>-1||"all"==this._handlers[n].event)&&(toFunc(this._onceHandlers[n].handler).call(this,this._onceHandlers[n].event,t),this._onceHandlers.splice(n--,1));return this},this.renderer=function(){return $("<div class='Obj'></div>")},this.refresher=function(e){return this.renderer.apply(this)},this.destroyer=function(e){},this.render=function(e,t){var n=this;if(void 0===e)e="body";if(void 0===t)t="replace";else t=t.toLowerCase();var i=[].slice.call(arguments,2),s=this;return $(e).each(function(e,r){r=$(r);var a=$(n.renderer.apply(n,i));a.attr("guid",n.guid),n._elements=n._elements.add(a),"append"==t?r.append(a):"prepend"==t?r.prepend(a):"after"==t?r.after(a):"before"==t?r.before(a):"return"==t?s=a:"none"==t||(r.after(a),r.remove())}),this.trigger("render"),s},this.refresh=function(){for(var e=$(),t=0;t<this._elements.length;t++){var n=this._elements.eq(t),i=this.refresher.call(this,n);i?(i.attr("guid",this.guid),this._elements=this._elements.not(n),n.after(i),n.remove(),e=e.add(i)):e=e.add(n)}return this._elements=e,this},this.destroy=function(){var e=this;return this._elements.each(function(t,n){var i=$(n);e.destroyer.call(e,i)}),this._elements.remove(),this._elements=$(),delete Objs[this.guid],this},Objs[this.guid]=this}!function(e){var t="slideMenu",n={position:"right",showBackLink:!0,keycodeOpen:null,keycodeClose:27,submenuLinkBefore:"",submenuLinkAfter:"",backLinkBefore:"",backLinkAfter:""},i=function(){function t(e){_classCallCheck(this,t),this.options=e,this._menu=e.elem,this._menu.find("ul:first").wrap('<div class="slider">'),this._anchors=this._menu.find("a"),this._slider=this._menu.find(".slider:first"),this._level=0,this._isOpen=!1,this._isAnimating=!1,this._hasMenu=this._anchors.length>0,this._lastAction=null,this._setupEventHandlers(),this._setupMenu(),this._hasMenu&&this._setupSubmenus()}return _createClass(t,[{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0;return null===e?void(this._isOpen?this.close():this.open()):(e?(n=0,this._isOpen=!0):(n="left"===this.options.position?"-100%":"100%",this._isOpen=!1),this._triggerEvent(),void(t?this._triggerAnimation(this._menu,n):(this._pauseAnimations(this._triggerAnimation.bind(this,this._menu,n)),this._isAnimating=!1)))}},{key:"open",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._lastAction="open",this.toggle(!0,e)}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._lastAction="close",this.toggle(!1,e)}},{key:"back",value:function(){this._lastAction="back",this._navigate(null,-1)}},{key:"navigateTo",value:function(t){var n=this;if(!(t=this._menu.find(e(t)).first()).length)return!1;var i=t.parents("ul"),s=i.length-1;return 0!==s&&void this._pauseAnimations(function(){n._level=s,i.show().first().addClass("active"),n._triggerAnimation(n._slider,100*-n._level)})}},{key:"_setupEventHandlers",value:function(){var t=this;this._hasMenu&&this._anchors.click(function(n){var i=e(n.target).is("a")?e(n.target):e(n.target).parents("a:first");t._navigate(i)}),e(this._menu.add(this._slider)).on("transitionend msTransitionEnd",function(){t._isAnimating=!1,t._triggerEvent(!0)}),e(document).keydown(function(e){switch(e.which){case t.options.keycodeClose:t.close();break;case t.options.keycodeOpen:t.open();break;default:return}e.preventDefault()}),this._menu.on("sm.back-after",function(){var e="ul "+".active ".repeat(t._level+1);t._menu.find(e).removeClass("active").hide()})}},{key:"_triggerEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="sm."+this._lastAction;e&&(t+="-after"),this._menu.trigger(t)}},{key:"_navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this._isAnimating){var n=-100*(this._level+t);if(t>0){if(!e.next("ul").length)return;e.next("ul").addClass("active").show()}else if(0===this._level)return;this._lastAction=t>0?"forward":"back",this._level=this._level+t,this._triggerAnimation(this._slider,n)}}},{key:"_triggerAnimation",value:function(e,t){this._triggerEvent(),-1===String(t).indexOf("%")&&(t+="%"),e.css("transform","translateX("+t+")"),this._isAnimating=!0}},{key:"_setupMenu",value:function(){var e=this;this._pauseAnimations(function(){switch(e.options.position){case"left":e._menu.css({left:0,right:"auto",transform:"translateX(-100%)"});break;default:e._menu.css({left:"auto",right:0})}e._menu.show()})}},{key:"_pauseAnimations",value:function(e){this._menu.addClass("no-transition"),e(),this._menu[0].offsetHeight,this._menu.removeClass("no-transition")}},{key:"_setupSubmenus",value:function(){var t=this;this._anchors.each(function(n,i){if((i=e(i)).next("ul").length){i.click(function(e){e.preventDefault()});var s=i.text();if(i.html(t.options.submenuLinkBefore+s+t.options.submenuLinkAfter),t.options.showBackLink){var r=e('<a href class="bg-ddan slide-menu-control" data-action="back">'+s+"</a>");r.html(t.options.backLinkBefore+r.text()+t.options.backLinkAfter),i.next("ul").prepend(e("<li>").append(r))}}})}}]),t}();e("body").on("click",".slide-menu-control",function(n){var i=void 0,s=e(this).data("target");if((i=s&&"this"!==s?e("#"+s):e(this).parents(".slide-menu:first")).length){var r=i.data(t),a=e(this).data("action");return r&&"function"==typeof r[a]&&r[a](),!1}}),e.fn[t]=function(s){if(e(this).length){(s=e.extend({},n,s)).elem=e(this);var r=new i(s);return e(this).data(t,r),r}console.warn("Slide Menu: Unable to find menu DOM element. Maybe a typo?")}}(jQuery);var GUIDList=[],Objs={};